# üê≥ Deployment Guide - Docker Compose

## ‚úÖ –ü—ñ–¥—Å—É–º–æ–∫ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –°—Ç–≤–æ—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
school-registry/
‚îú‚îÄ‚îÄ docker-compose.yml           # üéØ –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫—É
‚îú‚îÄ‚îÄ .env                         # –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ backend/                     # Spring Boot –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              # Backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ pom.xml                 # Maven –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ src/                    # Java –∫–æ–¥
‚îú‚îÄ‚îÄ frontend/                   # React –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              # Frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ package.json            # NPM –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îÇ   ‚îî‚îÄ‚îÄ src/                    # React –∫–æ–¥
‚îú‚îÄ‚îÄ postgres-init/              # PostgreSQL —Å–∫—Ä–∏–ø—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ 01-init.sql
‚îú‚îÄ‚îÄ start.sh                    # üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ test-system.sh              # üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

### üéØ –í–∏–º–æ–≥–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ

#### ‚úÖ 1. Postgres
- **–û–±—Ä–∞–∑**: `postgres:15` ‚úì
- **–ü–æ—Ä—Ç–∏**: `5432:5432` ‚úì
- **–ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è**:
  - `POSTGRES_USER=user` ‚úì
  - `POSTGRES_PASSWORD=pass` ‚úì
  - `POSTGRES_DB=schooldb` ‚úì
- **Volume**: `pgdata:/var/lib/postgresql/data` ‚úì

#### ‚úÖ 2. Backend (Spring Boot)
- **Build**: `./backend` ‚úì
- **–ü–æ—Ä—Ç**: `8080:8080` ‚úì
- **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å**: `depends_on: [postgres]` ‚úì
- **–ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è**:
  - `SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/schooldb` ‚úì
  - `SPRING_DATASOURCE_USERNAME=user` ‚úì
  - `SPRING_DATASOURCE_PASSWORD=pass` ‚úì
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è Postgres**: Health checks ‚úì

#### ‚úÖ 3. Frontend (React)
- **Build**: `./frontend` ‚úì
- **–ü–æ—Ä—Ç**: `3000:3000` ‚úì
- **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å**: `depends_on: [backend]` ‚úì
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è Backend**: Health checks ‚úì

### üöÄ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫—É

```bash
docker-compose up --build
```

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

1. **PostgreSQL** –≥–æ—Ç–æ–≤–∏–π –Ω–∞ –ø–æ—Ä—Ç—É 5432
2. **Backend** –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://localhost:8080
3. **Swagger** –ø—Ä–∞—Ü—é—î –Ω–∞ http://localhost:8080/swagger-ui/index.html
4. **Frontend** –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ http://localhost:3000
5. **Liquibase** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –º—ñ–≥—Ä–∞—Ü—ñ—ó
6. **–¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ** –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –≤ –±–∞–∑—É

### üìä –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **Health checks** –¥–ª—è –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π restart** –ø—Ä–∏ –∑–±–æ—è—Ö
- **Volumes** –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö PostgreSQL
- **Networks** –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—ñ–≤
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è** –≤ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏

### üß™ –í–∞–ª—ñ–¥–∞—Ü—ñ—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
docker-compose config

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
./test-system.sh

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose ps

# –õ–æ–≥–∏
docker-compose logs -f
```

### üéØ –î–æ—Å—è–≥–Ω—É—Ç–æ —Ü—ñ–ª–µ–π

- ‚úÖ –ü–æ–≤–Ω–∏–π –∑–∞–ø—É—Å–∫ –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é
- ‚úÖ –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ Postgres –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ Node.js –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ volume
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Liquibase –¥–ª—è –∞–≤—Ç–æ–º—ñ–≥—Ä–∞—Ü—ñ–π
- ‚úÖ Swagger –¥–æ—Å—Ç—É–ø–Ω–∏–π –æ–¥—Ä–∞–∑—É
- ‚úÖ Frontend –ø—Ä–∞—Ü—é—î –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

---

## üéâ –ì–æ—Ç–æ–≤–æ!

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ Docker Compose!**

```bash
docker-compose up --build
# ‚Üì
# –ß–µ—Ä–µ–∑ 2-4 —Ö–≤–∏–ª–∏–Ω–∏ –≤—Å–µ –ø—Ä–∞—Ü—é—î! üöÄ
``` 
 

## ‚úÖ –ü—ñ–¥—Å—É–º–æ–∫ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –°—Ç–≤–æ—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
school-registry/
‚îú‚îÄ‚îÄ docker-compose.yml           # üéØ –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫—É
‚îú‚îÄ‚îÄ .env                         # –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ backend/                     # Spring Boot –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              # Backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ pom.xml                 # Maven –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ src/                    # Java –∫–æ–¥
‚îú‚îÄ‚îÄ frontend/                   # React –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              # Frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ package.json            # NPM –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îÇ   ‚îî‚îÄ‚îÄ src/                    # React –∫–æ–¥
‚îú‚îÄ‚îÄ postgres-init/              # PostgreSQL —Å–∫—Ä–∏–ø—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ 01-init.sql
‚îú‚îÄ‚îÄ start.sh                    # üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ test-system.sh              # üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

### üéØ –í–∏–º–æ–≥–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ

#### ‚úÖ 1. Postgres
- **–û–±—Ä–∞–∑**: `postgres:15` ‚úì
- **–ü–æ—Ä—Ç–∏**: `5432:5432` ‚úì
- **–ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è**:
  - `POSTGRES_USER=user` ‚úì
  - `POSTGRES_PASSWORD=pass` ‚úì
  - `POSTGRES_DB=schooldb` ‚úì
- **Volume**: `pgdata:/var/lib/postgresql/data` ‚úì

#### ‚úÖ 2. Backend (Spring Boot)
- **Build**: `./backend` ‚úì
- **–ü–æ—Ä—Ç**: `8080:8080` ‚úì
- **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å**: `depends_on: [postgres]` ‚úì
- **–ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è**:
  - `SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/schooldb` ‚úì
  - `SPRING_DATASOURCE_USERNAME=user` ‚úì
  - `SPRING_DATASOURCE_PASSWORD=pass` ‚úì
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è Postgres**: Health checks ‚úì

#### ‚úÖ 3. Frontend (React)
- **Build**: `./frontend` ‚úì
- **–ü–æ—Ä—Ç**: `3000:3000` ‚úì
- **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å**: `depends_on: [backend]` ‚úì
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è Backend**: Health checks ‚úì

### üöÄ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫—É

```bash
docker-compose up --build
```

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

1. **PostgreSQL** –≥–æ—Ç–æ–≤–∏–π –Ω–∞ –ø–æ—Ä—Ç—É 5432
2. **Backend** –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://localhost:8080
3. **Swagger** –ø—Ä–∞—Ü—é—î –Ω–∞ http://localhost:8080/swagger-ui/index.html
4. **Frontend** –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ http://localhost:3000
5. **Liquibase** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –º—ñ–≥—Ä–∞—Ü—ñ—ó
6. **–¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ** –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –≤ –±–∞–∑—É

### üìä –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **Health checks** –¥–ª—è –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π restart** –ø—Ä–∏ –∑–±–æ—è—Ö
- **Volumes** –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö PostgreSQL
- **Networks** –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—ñ–≤
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è** –≤ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏

### üß™ –í–∞–ª—ñ–¥–∞—Ü—ñ—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
docker-compose config

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
./test-system.sh

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose ps

# –õ–æ–≥–∏
docker-compose logs -f
```

### üéØ –î–æ—Å—è–≥–Ω—É—Ç–æ —Ü—ñ–ª–µ–π

- ‚úÖ –ü–æ–≤–Ω–∏–π –∑–∞–ø—É—Å–∫ –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é
- ‚úÖ –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ Postgres –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ Node.js –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ volume
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Liquibase –¥–ª—è –∞–≤—Ç–æ–º—ñ–≥—Ä–∞—Ü—ñ–π
- ‚úÖ Swagger –¥–æ—Å—Ç—É–ø–Ω–∏–π –æ–¥—Ä–∞–∑—É
- ‚úÖ Frontend –ø—Ä–∞—Ü—é—î –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

---

## üéâ –ì–æ—Ç–æ–≤–æ!

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ Docker Compose!**

```bash
docker-compose up --build
# ‚Üì
# –ß–µ—Ä–µ–∑ 2-4 —Ö–≤–∏–ª–∏–Ω–∏ –≤—Å–µ –ø—Ä–∞—Ü—é—î! üöÄ
``` 